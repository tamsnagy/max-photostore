<!DOCTYPE html>
<html>

<head>
    <!-- JQuery import -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="/js/scripts.js"></script>
</head>

<script>
    $(document).ready(function() {
        $("#sign-up-button").on("click", function() {
           $.ajax({
               url: "/api/signup",
               type: "POST",
               data: JSON.stringify($("#sign-up-form").serializeObject()),
               cache: "false",
               contentType: "application/json",
               beforeSend: function() {
                   $("#sign-up-button").prop("disabled", true);
                   $("#sign-up-message").text("");
               },
               success: function() {
                   window.location.replace("login.html");
               },
               error: function(xhr, status, error) {
                   $("#sign-up-message").text(xhr.responseText);
               },
               complete: function() {
                   $("#sign-up-button").prop("disabled", false);
               }
           });
        });
    });
</script>

<body>

<a href="index.html">Back</a>

<form id="sign-up-form">
    <table>
        <tr>
            <td>Username</td>
            <td><input id="sign-up-username" name="username" type="text" /></td>
        </tr>
        <tr>
            <td>E-mail</td>
            <td><input id="sign-up-email" name="email" type="text" /></td>
        </tr>
        <tr>
            <td>Password</td>
            <td><input id="sign-up-password" name="password" type="password" /></td>
        </tr>
        <tr>
            <td colspan="2"><input id="sign-up-button" type="button" value="Sign up" /></td>
        </tr>
    </table>
</form>

<span id="sign-up-message"></span>

</body>

</html>